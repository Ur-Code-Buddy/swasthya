<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor's Appointment</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #2B3035;
            color: #fff;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .navbar {
            width: 100%;
            animation: slideInFromTop 1.5s ease-in-out;
        }
        @keyframes slideInFromTop {
            from {
                opacity: 0;
                transform: translateY(-100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header-box {
            background-color: #2B3035;
            color: rgb(194, 182, 182);
            padding: 20px;
            text-align: center;
            width: 100%;
            border-radius: 8px;
            animation: fadeIn 2s ease-in-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .appointment-container {
            background-color: #495057;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            width: 80%;
            animation: zoomIn 2s ease-in-out;
            position: relative;
        }
        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .text-box {
            border: 1px solid #fff;
            padding: 20px;
            margin-top: 20px;
            background-color: #212529;
            border-radius: 8px;
            color: #cd5252;
            width: 50%;
            height: 200px;
        }
        footer {
            background-color: #212529;
            color: #5f3d3d;
            padding: 20px;
            text-align: center;
            animation: slideInFromBottom 1.5s ease-in-out;
        }
        @keyframes slideInFromBottom {
            from {
                opacity: 0;
                transform: translateY(100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .btn-custom {
            background-color: black;
            border: none;
            color: #fff;
            margin-right: 10px;
        }
        .btn-custom:hover {
            background-color: #fff;
            color: black;
        }
        .btn-danger:hover {
            background-color: #fff;
            color: red;
        }
        .glow-text {
            animation: glow 1.5s infinite alternate;
        }
        @keyframes glow {
            from {
                text-shadow: 0 0 5px rgb(235, 88, 88);
            }
            to {
                text-shadow: 0 0 20px rgb(235, 88, 88), 0 0 30px rgb(235, 88, 88), 0 0 40px rgb(235, 88, 88), 0 0 50px rgb(235, 88, 88);
            }
        }
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #212529;
            border-radius: 0.375rem;
            border-width: 1px;
            border-color: lightslategray;
            color: rgb(243, 143, 143);
            padding: 8px;
            font-size: 16px;
            width: 100%;
            background-image: url('data:image/svg+xml;charset=US-ASCII,<svg%20xmlns="http://www.w3.org/2000/svg"%20viewBox="0%200%204%205"><path%20fill="rgb(243,%20143,%20143)"%20d="M2%200L4%202H0z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 10px;
            padding-right: 30px;
        }
        select::-ms-expand {
            display: none;
        }
        select::-webkit-details-marker {
            display: none;
        }
        .btn-container {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
        }
        .appointment-container p {
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .appointment-container {
                width: 95%;
                padding: 10px;
            }
            .text-box {
                width: 95%;
                height: auto;
            }
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">
        <div style="height: 50px; width: 50px; border-radius: 50%;">
            <img src="https://images.unsplash.com/photo-1530210124550-912dc1381cb8?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA==" alt="Logo" style="height: 40px; width: 60px;">
        </div>
    </a>
    <div class="navbar-nav ml-auto">
        <button class="btn btn-primary mx-2" style="background-color: #212529; border: none; color: #fff">Home</button>
        <button class="btn btn-primary mx-2" style="background-color: #212529; border: none; color: #fff;">My Account</button>
    </div>
</nav>

<div class="header-box">
    <h1 class="glow-text">Upcoming Appointments</h1>
</div>

<div class="container">
    <div class="mb-4" style="width: 80%;">
        <label for="appointment-select" class="form-label">Select Appointment</label>
        <select id="appointment-select" class="form-control" style="background-color: #212529; border-radius: 0.375rem; border-width: 1px; border-color: lightslategray; color: rgb(243, 143, 143)">
        </select>
    </div>

    <div id="appointment-details" class="appointment-container">
        <div>
            <p><strong>With <span id="appointment-doctor"></span></strong></p>
            <p>Date: <span id="appointment-date"></span></p>
            <p>Time: <span id="appointment-time"></span></p>
            <p>Problem: <span id="appointment-problem"></span></p>
            <p style="margin-bottom: 100px;"></p>
        </div>
    </div>

    <div class="text-box">
        <p class="centeralign">If you need to cancel your appointment within the last hour, 
            we kindly request that you call the doctor's office directly to inform us of your cancellation. 
            This ensures that we can manage our schedule effectively and offer the time slot to another patient in need. 
            Your cooperation is greatly appreciated. Please contact the doctor's office at the following number: xxxxxxxxxx. 
            Thank you for your understanding and assistance in this matter.</p>
    </div>
</div>

<footer>
    <p>&copy; 2024 Doctor Appointment. All rights reserved.</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Fetch appointments data
        fetch('https://swasthya-kycn.onrender.com/swasthya/api/doctor-appointments', {
            method: 'GET',
            headers: {
                'username': 'doctorUsername',
                'password': 'doctorPassword'
            }
        })
        .then(response => response.json())
        .then(data => {
            const appointmentSelect = document.getElementById('appointment-select');
            const appointmentDetails = document.getElementById('appointment-details');
            const appointmentDoctor = document.getElementById('appointment-doctor');
            const appointmentDate = document.getElementById('appointment-date');
            const appointmentTime = document.getElementById('appointment-time');
            const appointmentProblem = document.getElementById('appointment-problem');

            function formatDateTime(day, timing) {
                return {
                    date: day,
                    time: timing
                };
            }

            function loadAppointments(appointments) {
                if (appointments.length === 0) {
                    appointments = [{
                        "day": "N/A",
                        "message": "No upcoming appointments",
                        "doctor": "N/A",
                        "timing": "N/A"
                    }];
                }

                appointments.forEach((appointment, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `Appointment ${index + 1}`;
                    appointmentSelect.appendChild(option);
                });

                appointmentSelect.addEventListener('change', function() {
                    const selectedAppointment = appointments[this.value];
                    const formattedDateTime = formatDateTime(selectedAppointment.day, selectedAppointment.timing);
                    appointmentDoctor.textContent = selectedAppointment.doctor;
                    appointmentDate.textContent = formattedDateTime.date;
                    appointmentTime.textContent = formattedDateTime.time;
                    appointmentProblem.textContent = selectedAppointment.message;
                });

                appointmentSelect.value = 0;
                appointmentSelect.dispatchEvent(new Event('change'));
            }

            loadAppointments(data);
        })
        .catch(error => console.error('Error fetching appointments:', error));
    });
</script>

</body>
</html>
